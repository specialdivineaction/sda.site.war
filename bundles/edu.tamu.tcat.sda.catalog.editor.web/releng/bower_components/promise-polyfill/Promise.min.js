(function(f){function g(a,b){return function(){a.apply(b,arguments)}}function r(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)}function e(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];m(a,g(n,this),g(k,this))}function p(a){var b=this;null===this._state?this._deferreds.push(a):s(function(){var d=b._state?
	a.onFulfilled:a.onRejected;if(null===d)(b._state?a.resolve:a.reject)(b._value);else{var c;try{c=d(b._value)}catch(l){a.reject(l);return}a.resolve(c)}})}function n(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"===typeof a||"function"===typeof a)){var b=a.then;if("function"===typeof b){m(g(b,a),g(n,this),g(k,this));return}}this._state=!0;this._value=a;q.call(this)}catch(d){k.call(this,d)}}function k(a){this._state=!1;this._value=a;q.call(this)}function q(){for(var a=
	0,b=this._deferreds.length;a<b;a++)p.call(this,this._deferreds[a]);this._deferreds=null}function t(a,b,d,c){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.resolve=d;this.reject=c}function m(a,b,d){var c=!1;try{a(function(a){c||(c=!0,b(a))},function(a){c||(c=!0,d(a))})}catch(l){c||(c=!0,d(l))}}"undefined"!==typeof module&&module.exports?module.exports=f.Promise?f.Promise:e:f.Promise||(f.Promise=e);var s=function(){function a(){var a=b;d=void 0;b=[];
	for(var c=0,e=a.length;c<e;c++)a[c]()}var b,d,c;if(f.process&&"function"===process.nextTick)return process.nextTick;if(f.MutationObserver)return b=[],c=document.createElement("div"),(new MutationObserver(a)).observe(c,{attributes:!0}),function(a){b.length||c.setAttribute("yes","no");b.push(a)};if(f.setImmediate)return f.setImmediate;b=[];return function(c){b.push(c);d||(d=setTimeout(a,0))}}();e.prototype["catch"]=function(a){return this.then(null,a)};e.prototype.then=function(a,b){var d=this;return new e(function(c,
																																																																																																																																		   e){p.call(d,new t(a,b,c,e))})};e.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&r(arguments[0])?arguments[0]:arguments);return new e(function(b,d){function c(f,h){try{if(h&&("object"===typeof h||"function"===typeof h)){var g=h.then;if("function"===typeof g){g.call(h,function(a){c(f,a)},d);return}}a[f]=h;0===--e&&b(a)}catch(k){d(k)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)c(f,a[f])})};e.resolve=function(a){return new e(function(b){b(a)})};e.reject=
	function(a){return new e(function(b,d){d(a)})};e.race=function(a){return new e(function(b,d){for(var c=0,e=a.length;c<e;c++)a[c].then(b,d)})}})(this);